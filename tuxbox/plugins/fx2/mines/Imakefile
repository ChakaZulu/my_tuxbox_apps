all:: mines mines.so

PREF=powerpc-linux-
CC=$(PREF)gcc
STRIP=$(PREF)strip
CDEBUGFLAGS=-g -O2 -Wall -pedantic
INCLUDES=-I. -I../lib
OBJS=board.o

SingleProgramTarget(mines,main.o $(OBJS),,-L../lib -lfx2)

board.o: pics.h

mines.so: somain.o $(OBJS)
	$(CC) -o mines.so -shared -Wl,-soname,mines.so somain.o $(OBJS)
	$(STRIP) mines.so

InstallMultipleFlags(mines.so,../../mczap/neutrinoNG/games,-m 755)
InstallMultipleFlags(mines.cfg,../../mczap/neutrinoNG/games,-m 644)

clean::
	rm -f mines.so
